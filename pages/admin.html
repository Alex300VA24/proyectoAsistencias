<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Panel Administrador - Instituto Leonardo Da Vinci</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- FontAwesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Estilos -->
    <link rel="stylesheet" href="../style/style.css" />
    <style>
      .admin-tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 30px;
        border-bottom: 2px solid #e2e8f0;
      }

      .admin-tab-btn {
        background: none;
        border: none;
        padding: 12px 20px;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        color: #64748b;
        border-bottom: 3px solid transparent;
        transition: all 0.3s ease;
      }

      .admin-tab-btn.active {
        color: #1e40af;
        border-bottom-color: #1e40af;
      }

      .admin-tab-content {
        display: none;
      }

      .admin-tab-content.active {
        display: block;
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
        color: #1e293b;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #cbd5e1;
        border-radius: 6px;
        font-size: 14px;
        font-family: inherit;
      }

      .form-group textarea {
        resize: vertical;
        min-height: 80px;
      }

      .form-actions {
        display: flex;
        gap: 10px;
        margin-top: 20px;
      }

      .btn-primary,
      .btn-secondary {
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-primary {
        background-color: #1e40af;
        color: white;
      }

      .btn-primary:hover {
        background-color: #1e3a8a;
      }

      .btn-secondary {
        background-color: #e2e8f0;
        color: #1e293b;
      }

      .btn-secondary:hover {
        background-color: #cbd5e1;
      }

      .table-container {
        overflow-x: auto;
        margin-top: 20px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      th {
        background-color: #f1f5f9;
        padding: 15px;
        text-align: left;
        font-weight: 600;
        color: #1e293b;
        border-bottom: 2px solid #e2e8f0;
      }

      td {
        padding: 12px 15px;
        border-bottom: 1px solid #e2e8f0;
      }

      tr:hover {
        background-color: #f8fafc;
      }

      .action-buttons {
        display: flex;
        gap: 8px;
      }

      .btn-sm {
        padding: 6px 12px;
        border: none;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-edit {
        background-color: #3b82f6;
        color: white;
      }

      .btn-edit:hover {
        background-color: #2563eb;
      }

      .btn-delete {
        background-color: #ef4444;
        color: white;
      }

      .btn-delete:hover {
        background-color: #dc2626;
      }

      .btn-add {
        background-color: #10b981;
        color: white;
        padding: 10px 20px;
        margin-bottom: 20px;
      }

      .btn-add:hover {
        background-color: #059669;
      }

      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
      }

      .modal-content {
        background-color: white;
        margin: 5% auto;
        padding: 30px;
        border-radius: 10px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .modal-header {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 20px;
        color: #1e293b;
      }

      .modal.active {
        display: block;
      }

      .close-modal {
        float: right;
        font-size: 28px;
        font-weight: bold;
        color: #64748b;
        cursor: pointer;
      }

      .close-modal:hover {
        color: #1e293b;
      }

      .empty-state {
        text-align: center;
        padding: 40px;
        color: #64748b;
      }

      .empty-state i {
        font-size: 48px;
        margin-bottom: 15px;
        opacity: 0.5;
      }
    </style>
  </head>
  <body class="admin-body">
    <div class="admin-container">
      <!-- HEADER ADMIN -->
      <header class="admin-header">
        <div class="admin-header-icon">
          <i class="fas fa-user-shield"></i>
        </div>
        <h1>Panel de Administración</h1>
        <p class="admin-subtitle">
          <i class="fas fa-school"></i>
          Instituto Leonardo Da Vinci
        </p>
      </header>

      <!-- CONTENIDO -->
      <div class="admin-content">
        <!-- PESTAÑAS -->
        <div class="admin-tabs">
          <button class="admin-tab-btn active" onclick="cambiarTab('docentes')">
            <i class="fas fa-users"></i> Docentes
          </button>
          <button class="admin-tab-btn" onclick="cambiarTab('cursos')">
            <i class="fas fa-book"></i> Cursos
          </button>
          <button class="admin-tab-btn" onclick="cambiarTab('reportes')">
            <i class="fas fa-chart-bar"></i> Reportes
          </button>
        </div>

        <!-- TAB: DOCENTES -->
        <div id="docentes-tab" class="admin-tab-content active">
          <div class="admin-section-header">
            <i class="fas fa-users"></i>
            <h2>Gestión de Docentes</h2>
          </div>

          <button class="btn-primary btn-add" onclick="abrirModalDocente()">
            <i class="fas fa-plus"></i> Agregar Docente
          </button>

          <div class="table-container">
            <table id="tablaDocentes">
              <thead>
                <tr>
                  <th>DNI</th>
                  <th>Nombre</th>
                  <th>Curso</th>
                  <th>Horario</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="listaDocentes"></tbody>
            </table>
          </div>
        </div>

        <!-- TAB: CURSOS -->
        <div id="cursos-tab" class="admin-tab-content">
          <div class="admin-section-header">
            <i class="fas fa-book"></i>
            <h2>Gestión de Cursos</h2>
          </div>

          <button class="btn-primary btn-add" onclick="abrirModalCurso()">
            <i class="fas fa-plus"></i> Agregar Curso
          </button>

          <div class="table-container">
            <table id="tablaCursos">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Día</th>
                  <th>Hora Inicio</th>
                  <th>Hora Fin</th>
                  <th>Descripción</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="listaCursos"></tbody>
            </table>
          </div>
        </div>

        <!-- TAB: REPORTES -->
        <div id="reportes-tab" class="admin-tab-content">
          <div class="admin-section-header">
            <i class="fas fa-chart-bar"></i>
            <h2>Descargar Reportes</h2>
          </div>

          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Docente</th>
                  <th>DNI</th>
                  <th>Curso</th>
                  <th>Acción</th>
                </tr>
              </thead>
              <tbody id="listaReportes"></tbody>
            </table>
          </div>

          <div class="admin-actions" style="margin-top: 30px;">
            <button class="borrar-historial" onclick="confirmarBorrarHistorial()">
              <i class="fas fa-trash-alt"></i>
              Borrar Todo el Historial
            </button>

            <a href="index.html" class="btn-volver">
              <i class="fas fa-arrow-left"></i>
              Volver al Sistema
            </a>
          </div>
        </div>
      </div>

      <!-- FOOTER -->
      <footer class="footer admin-footer">
        <p><i class="fas fa-lock"></i> Acceso Administrativo</p>
        <p class="footer-sub">
          Sistema de Control de Asistencia Docente © 2026
        </p>
      </footer>
    </div>

    <!-- MODAL: CREAR/EDITAR DOCENTE -->
    <div id="modalDocente" class="modal">
      <div class="modal-content">
        <span class="close-modal" onclick="cerrarModalDocente()">&times;</span>
        <div class="modal-header" id="modalDocenteTitle">Agregar Docente</div>
        <form id="formDocente" onsubmit="guardarDocente(event)">
          <input type="hidden" id="docenteId">
          <div class="form-group">
            <label for="docenteDNI">DNI</label>
            <input type="text" id="docenteDNI" required>
          </div>
          <div class="form-group">
            <label for="docenteNombre">Nombre</label>
            <input type="text" id="docenteNombre" required>
          </div>
          <div class="form-group">
            <label for="docenteCursoId">Curso</label>
            <select id="docenteCursoId">
              <option value="">-- Seleccionar Curso --</option>
            </select>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn-primary">Guardar</button>
            <button type="button" class="btn-secondary" onclick="cerrarModalDocente()">Cancelar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- MODAL: CREAR/EDITAR CURSO -->
    <div id="modalCurso" class="modal">
      <div class="modal-content">
        <span class="close-modal" onclick="cerrarModalCurso()">&times;</span>
        <div class="modal-header" id="modalCursoTitle">Agregar Curso</div>
        <form id="formCurso" onsubmit="guardarCurso(event)">
          <input type="hidden" id="cursoId">
          <div class="form-group">
            <label for="cursoNombre">Nombre del Curso</label>
            <input type="text" id="cursoNombre" required>
          </div>
          <div class="form-group">
            <label for="cursoDia">Día de la Semana</label>
            <select id="cursoDia" required>
              <option value="">-- Seleccionar Día --</option>
              <option value="Lunes">Lunes</option>
              <option value="Martes">Martes</option>
              <option value="Miércoles">Miércoles</option>
              <option value="Jueves">Jueves</option>
              <option value="Viernes">Viernes</option>
              <option value="Sábado">Sábado</option>
            </select>
          </div>
          <div class="form-group">
            <label for="cursoHoraInicio">Hora Inicio (HH:MM)</label>
            <input type="time" id="cursoHoraInicio" required>
          </div>
          <div class="form-group">
            <label for="cursoHoraFin">Hora Fin (HH:MM)</label>
            <input type="time" id="cursoHoraFin" required>
          </div>
          <div class="form-group">
            <label for="cursoDescripcion">Descripción</label>
            <textarea id="cursoDescripcion"></textarea>
          </div>
          <div class="form-actions">
            <button type="submit" class="btn-primary">Guardar</button>
            <button type="button" class="btn-secondary" onclick="cerrarModalCurso()">Cancelar</button>
          </div>
        </form>
      </div>
    </div>

    <script src="../scripts/data.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="../scripts/admin.js"></script>

    <script>
      function confirmarBorrarHistorial() {
        Swal.fire({
          title: "¿Eliminar todo el historial?",
          text: "Esta acción no se puede deshacer. Se eliminarán todos los registros de asistencia.",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#dc2626",
          cancelButtonColor: "#64748b",
          confirmButtonText: '<i class="fas fa-trash"></i> Sí, eliminar todo',
          cancelButtonText: '<i class="fas fa-times"></i> Cancelar',
        }).then((result) => {
          if (result.isConfirmed) {
            borrarHistorial();
          }
        });
      }
    </script>
  </body>
</html>
